{"ast":null,"code":"import _toConsumableArray from \"/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/src/components/Image.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode'; // const BASE_URL = 'http://localhost:3001';\n\nvar Image =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Image, _Component);\n\n  function Image(props) {\n    var _this;\n\n    _classCallCheck(this, Image);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Image).call(this, props));\n\n    _this.selectImages = function (event) {\n      var images = [];\n\n      for (var i = 0; i < event.target.files.length; i++) {\n        images[i] = event.target.files.item(i);\n      }\n\n      images = images.filter(function (image) {\n        return image.name.match(/\\.(jpg|jpeg|png|gif)$/);\n      });\n      var message = \"\".concat(images.length, \" valid image(s) selected\");\n\n      _this.setState({\n        images: images,\n        message: message\n      });\n    };\n\n    _this.uploadImages = function () {\n      var uploaders = _this.state.images.map(function (image) {\n        var data = new FormData();\n        data.append(\"image\", image, image.name); // Make an AJAX upload request using Axios\n\n        return axios.post('/' + 'upload', data).then(function (response) {\n          _this.setState({\n            imageUrls: [response.data.imageUrl].concat(_toConsumableArray(_this.state.imageUrls))\n          });\n        });\n      }); // Once all the files are uploaded\n\n\n      axios.all(uploaders).then(function () {\n        console.log('done');\n      }).catch(function (err) {\n        return alert(err.message);\n      });\n    };\n\n    _this.state = {\n      first_name: '',\n      last_name: '',\n      email: '',\n      images: [],\n      imageUrls: [],\n      message: ''\n    };\n    return _this;\n  }\n\n  _createClass(Image, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      this.setState({\n        first_name: decoded.first_name,\n        last_name: decoded.last_name,\n        email: decoded.email\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control \",\n        type: \"file\",\n        onChange: this.selectImages,\n        multiple: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        className: \"text-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, this.state.message), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        value: \"Submit\",\n        onClick: this.uploadImages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Submit\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.imageUrls.map(function (url, i) {\n        return React.createElement(\"div\", {\n          className: \"col-lg-2\",\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: '/' + url,\n          className: \"img-rounded img-responsive\",\n          alt: \"not available\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }));\n      })));\n    }\n  }]);\n\n  return Image;\n}(Component);\n\nexport default Image;","map":{"version":3,"sources":["/home/oracletone/Desktop/ironHack/Module 3/Week 8/day1/blog-post/src/components/Image.js"],"names":["React","Component","axios","jwt_decode","Image","props","selectImages","event","images","i","target","files","length","item","filter","image","name","match","message","setState","uploadImages","uploaders","state","map","data","FormData","append","post","then","response","imageUrls","imageUrl","all","console","log","catch","err","alert","first_name","last_name","email","token","localStorage","usertoken","decoded","url"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n// const BASE_URL = 'http://localhost:3001';\n\nclass Image extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n          first_name: '',\n          last_name: '',\n            email: '',\n            images: [],\n            imageUrls: [],\n            message: ''\n        }\n    }\n\n    componentDidMount () {\n      const token = localStorage.usertoken\n      const decoded = jwt_decode(token)\n      this.setState({\n        first_name: decoded.first_name,\n        last_name: decoded.last_name,\n        email: decoded.email\n      })\n    \n    }\n\n    selectImages = (event) => {\n        let images = []\n        for (var i = 0; i < event.target.files.length; i++) {\n            images[i] = event.target.files.item(i);\n        }\n        images = images.filter(image => image.name.match(/\\.(jpg|jpeg|png|gif)$/))\n        let message = `${images.length} valid image(s) selected`\n        this.setState({images, message})\n    }\n    uploadImages = () => {\n        const uploaders = this.state.images.map(image => {\n                const data = new FormData();\n                data.append(\"image\", image, image.name);\n                // Make an AJAX upload request using Axios\n                return axios.post('/' + 'upload', data)\n                    .then(response => {\n                        this.setState({\n                            imageUrls: [\n                                response.data.imageUrl, ...this.state.imageUrls\n                            ]\n                        });\n                    })\n            });\n        // Once all the files are uploaded\n        axios.all(uploaders)\n           .then(() => {\n                console.log('done');\n            })\n            .catch(err => alert(err.message));\n    }\n    render() {\n        return (\n            <div>\n                <br/>\n                <div className=\"col-sm-12\">\n                    <hr/>\n                    <div className=\"col-sm-4\">\n                        <input\n                            className=\"form-control \"\n                            type=\"file\"\n                            onChange={this.selectImages}\n                            multiple/>\n                    </div>\n                    <p className=\"text-info\">{this.state.message}</p>\n                    <br/><br/><br/>\n                    <div className=\"col-sm-4\">\n                        <button className=\"btn btn-primary\" value=\"Submit\" onClick={this.uploadImages}>Submit</button>\n                    </div>\n                </div>\n                <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><hr/><br/>\n                <div className=\"row col-lg-12\">\n                    {this.state.imageUrls.map((url, i) => (\n                            <div className=\"col-lg-2\" key={i}>\n                                <img src={'/' + url}\n                                    className=\"img-rounded img-responsive\"\n                                    alt=\"not available\"/><br/>\n                            </div>\n                        ))\n}\n                </div>\n            </div>\n        );\n    }\n}\nexport default Image;"]},"metadata":{},"sourceType":"module"}